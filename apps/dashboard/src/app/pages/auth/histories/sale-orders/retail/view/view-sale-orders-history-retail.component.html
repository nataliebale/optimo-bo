<div class="d-flex align-items-center border-bottom px-4 border-table-border-color" style="height: 87px;">
  <div class="d-flex align-items-center col-3 px-0">
    <button
      (click)="goToSaleOrder(saleOrder.returnedSaleOrderId)"
      class="btn-view-action-rounded mr-2"
      style="width: 36px;height: 36px;"
      *ngIf="saleOrder?.returnedSaleOrderId"
    >
      <app-icon [icon]="'status-refunded'" class="icon-dark icon-w-h-28px"></app-icon>
    </button>
    <button
      (click)="goToSaleOrder(saleOrder.newSaleOrderId)"
      class="btn-view-action-rounded mr-2"
      style="width: 36px;height: 36px;"
      *ngIf="saleOrder?.newSaleOrderId"
    >
      <app-icon [icon]="'status-corrected'" ></app-icon>
    </button>
  </div>
  <div class="col d-flex flex-column text-center">
    <div class="font-size-20 font-family-bold text-dark text-truncate d-flex justify-content-center">
      #{{ saleOrder?.receiptNumber }}<app-icon *ngIf="saleOrder?.status === 95" [icon]="'status-refunded'" class="mt-n3px ml-2"></app-icon>
    </div>
    <div class="font-size-14 text-truncate text-dark text-truncate" style="color: #aaa;">
      <!-- TODO: fix style -->
      #{{ saleOrder?.transactionId }}
    </div>
  </div>
  <div class="col-3 text-right px-0">
    <app-icon (click)="onBack()" [icon]="'close'" class="ml-auto icon-close-dark" style="cursor: pointer;"></app-icon>
  </div>
</div>
<div style="height: 455px; overflow-y: auto;" class="custom-view-scroll d-flex flex-column border-right border-transparent border-width-2px">
  <div class="container-fluid py-4 border-bottom border-table-border-color px-3">
    <optimo-view-attributes [items]="orderAttributeItems"></optimo-view-attributes>
    <!-- <div class="row align-items-center">
      <div class="col-4 line-height-normal">
        <div class="font-family-bold font-size-14 text-dark">
          სახელი
        </div>
        <div class="font-size-14 font-family-regular text-dark mt-1">
          {{ saleOrder?.operatorName }}
        </div>
      </div>
    </div> -->
  </div>
  <app-table *ngIf="saleOrder?.orderLines" [dataSource]="saleOrder.orderLines"
    [displayedColumns]="stockItemsDisplayedColumns" [paginable]="false" [selectable]="false" [filterable]="false"
    [staticData]="true" class="table-dialogs table-view flex-grow-1 d-flex flex-column">
    <ng-template app-cell let-cell="cell" let-row="row" name="stockItemName">
      <div class="d-flex flex-column">
		<span [matTooltip]="row.stockItemName"
		#ref1 [matTooltipDisabled]="textIsTruncated(ref1)"
          class="font-family-bold text-truncate mw-100 d-inline-block table-text-dark">
          {{ row.stockItemName }}
        </span>

        <span [matTooltip]="row.stockItemBarcode" #ref2 [matTooltipDisabled]="textIsTruncated(ref2)" class="text-truncate mw-100 d-inline-block table-text-dark mt-1">
          {{ row.stockItemBarcode }}
        </span>
      </div>
    </ng-template>
  </app-table>
</div>
<!-- <div
  class="d-flex align-items-center border justify-content-center px-4 border-table-border-color"
  style="height: 83px;"
>
  <app-paginator class="pagination-sm ml-auto"></app-paginator>
</div> -->
