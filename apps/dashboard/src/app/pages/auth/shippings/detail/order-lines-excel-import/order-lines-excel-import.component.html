<div class="w-100" style="max-width:960px;">
  <div class="font-family-bold font-color-dark font-size-20 pb-4 line-height-normal">
    {{'Shipping.Item.Details.excelUpload.uploadProducts' | translate}}
  </div>
  <div class="uploader-dashed-bg-960px w-100 hover-wrapper position-relative" style="height: 200px;">
    
    <!-- 1step -->
    <ng-container *ngIf="!selectedFile?.fileName">
      <label
        class="m-0 w-100 h-100 d-flex justify-content-center align-items-center flex-column"
        style="cursor: pointer; color: inherit;"
        for="uploadOrderLines"
        (click)="fileInput.value = null"
        >
        <app-icon icon="form-upload"></app-icon>
        <div class="font-family-bold font-color-dark font-size-14 pt-2">
          {{'Shipping.Item.Details.excelUpload.uploadForm' | translate}}
        </div>
        <input
          #fileInput
          id="uploadOrderLines"
          data-hj-allow
          class="d-none"
          type="file"
          accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"
          (change)="onUpload($event.target.files)"
        />
      </label>
      <button type="button" (click)="downloadBlank()" style="top: 8px;right: 8px;" class="hover-element position-absolute btn bg-light-green px-19px py-2">
        <app-icon icon="excel"></app-icon>
      </button>
    </ng-container>

    <!-- 2step -->
    <ng-container *ngIf="selectedFile?.fileName">

      <div class="w-100 h-100 d-flex justify-content-center align-items-center flex-column cursor-pointer">
        <div class="font-family-regular font-color-dark font-size-14"
          (click)="downloadFile()"
        >{{selectedFile?.fileName}}</div>
        <button style="transform: translateY(45px);" class="btn font-family-bold font-color-dark font-size-14 py-2px px-28px"
          (click)="onDelete()"
        >
          {{'Shipping.Item.Details.excelUpload.clear' | translate}}
        </button>
      </div>
      <button type="button" (click)="downloadBlank()" style="top: 8px;right: 8px;" class="position-absolute btn bg-light-green px-19px py-2">
        <app-icon icon="excel"></app-icon>
      </button>
    </ng-container>
  </div>
</div>

<ng-template #uploadPopup>
  <div 
  style="width: 548px;height: 192px;box-shadow: 0 5px 30px -10px rgba(13, 18, 46, 0.5);"
  class="d-flex flex-column justify-content-center align-items-center text-center bg-white"
  *ngIf="uploadStatus === uploadStatusEnum.Uploading">
    <div class="position-relative d-flex justify-content-center align-items-center" style="width: 64px;height: 64px;">
      <app-icon icon="loader-big" class="position-absolute" style="top:0px;left:0px;"></app-icon>
      <div class="rounded-circle bg-table-border-color d-flex justify-content-center align-items-center" style="width: 54px;height: 54px;">
        <app-icon icon="upload"></app-icon>
      </div>
    </div>
    <div class="pt-3 font-size-18 font-family-bold font-color-dark">
      {{'Shipping.Item.Details.excelUpload.uploadPopup.uploadingText' | translate}}
    </div>
  </div>
  <div style="width: 548px;box-shadow: 0 5px 30px -10px rgba(13, 18, 46, 0.5);" class="bg-white" *ngIf="uploadStatus === uploadStatusEnum.PendingError">
    
    <div class="d-flex align-items-center justify-content-between px-4 border-bottom border-table-border-color" style="height: 60px;">
      <div class="font-size-18 font-family-bold font-color-dark">
        <app-icon icon="alert" class="mr-10px"></app-icon> 
        {{'Shipping.Item.Details.excelUpload.uploadPopup.uploadFailed' | translate}}
      </div>
      <button
        class="btn bg-transparent rounded-0 p-0"
        (click)="onClose()"
      >
        <app-icon icon="close" class="icon-w-20px icon-h-20px"   style="cursor: pointer;"></app-icon>
      </button>
    </div>
    <div class="pt-3 px-4">
      <div class="d-flex align-items-center">
        <div class=" font-size-14 text-dark">
          {{'Shipping.Item.Details.excelUpload.uploadPopup.uploadFailedText' | translate}}
      </div>
      </div>
    </div>
    <div class="px-4 pt-3">
      <div class="d-flex align-items-center mb-2">
        <span
          class="bg-yellow-light rounded-circle"
          style="width: 8px; height: 8px;"
        ></span>
        <div class="font-size-14 text-dark ml-2">
          {{'Shipping.Item.Details.excelUpload.uploadPopup.duplicatedProducts' | translate}}
        </div>
      </div>
      <div class="d-flex align-items-center mb-2">
        <span
          class="bg-yellow-to-red rounded-circle"
          style="width: 8px; height: 8px;"
        ></span>
        <div class="font-size-14 text-dark ml-2">
          {{ 'ORDERS.ITEM.DETAILS.UPLOAD_FAILED_DIALOG.ASSORTMENT_PRODUCTS' | translate }}
        </div>
      </div>
      <div class="d-flex align-items-center">
        <span
          class="bg-red-form-control rounded-circle"
          style="width: 8px; height: 8px;"
        ></span>
        <div class="font-size-14 text-dark ml-2">
          {{'Shipping.Item.Details.excelUpload.uploadPopup.failedProducts' | translate}}
        </div>
      </div>
    </div>
  
    <div class="d-flex justify-content-end px-4 pt-4 pb-4">
      <button (click)="onClose()" class="btn bg-transparent px-4 mr-2 font-size-14 font-color-dark font-family-bold" style="height: 42px;">
        {{'Shipping.Item.Details.excelUpload.uploadPopup.cancelButton' | translate}}
      </button>
      <button (click)="downloadResponse()" 
      matTooltip="ექსელში ექსპორტი" class="btn btn-light-green px-4 font-size-14 font-color-white font-family-bold py-0 border-0" style="height: 42px;">
        <app-icon icon="excel" class="mr-1"></app-icon>{{'Shipping.Item.Details.excelUpload.uploadPopup.downloadButton' | translate}}
      </button>
    </div>
  </div>
</ng-template>