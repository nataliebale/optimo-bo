<div class="d-flex flex-column h-100">
	<div class="statistics-fixed-header d-flex align-items-center justify-content-between px-4" style="height: 64px;" [ngClass]="{'header-shadow': !scrolledToTop}">
		<div class="product-select product-search flex-grow-1 mb-3 mb-sm-0 w-100  border rounded border-pagination-border "
			style="max-width: 600px;height: 42px;">
			<app-dynamic-select [dataGetter]="getStockitems" [itemGetterById]="getStockitemById"
				additionalSearchKey="barcode" [(ngModel)]="stockItemId" class="flex-grow-1  mw-100 font-size-14 h-37px"
				(change)="onStockitemChange($event)" id="statistics-product-choose-product">
			</app-dynamic-select>
		</div>
		<app-date-picker class="date-picker-regular ml-auto only-range-picker" [maxDate]="endOfToday" (dateChange)="onDateChanged($event)"
			[defaultDate]="dateRange">
		</app-date-picker>
	</div>
	<div *ngIf="!stockItem" style="padding-top:205px;" class="  d-flex align-items-center justify-content-center">
		<div class="font-size-14 font-color-dark font-family-bold d-flex flex-column align-items-center">
			<app-icon icon="no-data-stats" class="mb-2"></app-icon>
			{{'STATISTICS.PRODUCT.NO_PRODUCT_SELECTED' | translate}}
		</div>
	</div>

	<ng-container *ngIf="stockItem">
		<div
			class="mt-72px bg-white border-top border-bottom border-pagination-border d-flex align-items-center flex-wrap flex-sm-nowrap px-4 py-sm-22px ">

			<ng-container *ngIf="stockItem && stockItem.photoUrl">
				<div class="product-image rounded mb-3 mb-sm-0" style="background: no-repeat center / contain;"
					[ngStyle]="{ 'background-image': 'url(' + stockItem.photoUrl  + ')' }">
				</div>
			</ng-container>
			<ng-container *ngIf="!stockItem || !stockItem.photoUrl">
				<div class="product-image rounded mb-3 mb-sm-0" style="background: no-repeat center / cover;"
					[ngStyle]="{ 'background-image': 'url(' +  'assets/images/no-image.png' + ')' }">
				</div>
			</ng-container>

			<div class="ml-0 ml-sm-3 ml-md-4 flex-grow-1">
				<div class="container-fluid   px-0">
					<div class="row align-items-center">
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate"
								[matTooltip]="stockItem.name" #ref1 [matTooltipDisabled]="textIsTruncated(ref1)">
								{{stockItem.name}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="stockItem?.barcode" #ref2 [matTooltipDisabled]="textIsTruncated(ref2)">
								{{stockItem.barcode}}
							</div>
						</div>
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div
								class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate">
								{{'GENERAL.CATEGORY' | translate}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="stockItem.categoryName" #ref3 [matTooltipDisabled]="textIsTruncated(ref3)">
								{{stockItem.categoryName}}
							</div>
						</div>
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div
								class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate">
								{{'GENERAL.DISTRIBUTOR' | translate}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="getTooltip(stockItem.suppliers)" #ref4 [matTooltipDisabled]="textIsTruncated(ref4)">
								<ng-container *ngIf="stockItem.suppliers && stockItem.suppliers.length"></ng-container>
								{{getSuppliersName(stockItem.suppliers)}}
							</div>

						</div>
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div
								class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate">
								{{'STATISTICS.PRODUCT.UNIT_COST' | translate}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="stockItem.unitCost | number: '1.2-2':'en'" #ref5 [matTooltipDisabled]="textIsTruncated(ref5)">
								{{stockItem.unitCost | number: '1.2-2':'en'}}
							</div>
						</div>
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div
								class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate">
								{{'GENERAL.UNIT_PRICE' | translate}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="stockItem.unitPrice | number: '1.2-2':'en'" #ref6 [matTooltipDisabled]="textIsTruncated(ref6)">
								{{stockItem.unitPrice | number: '1.2-2':'en'}}
							</div>
						</div>
						<div class="pt-1 mt-4 mt-sm-3 mt-md-0 line-height-normal text-truncate col"
							style="max-width:315px;">
							<div
								class="font-family-bold font-size-14 font-color-dark pb-2 d-inline-block mw-100 text-truncate">
								{{'STATISTICS.PRODUCT.CURRENT_SUPPLY' | translate}}
							</div>
							<br>
							<div class="font-family-regular font-size-14 text-dark text-truncate mw-100 d-inline-block text-truncate"
								[matTooltip]="stockItem.quantity | number: '1.0-0':'en'" #ref7 [matTooltipDisabled]="textIsTruncated(ref7)">
								{{ stockItem.quantity | number: '1.0-0':'en'}}
								{{ getUMOAcronym(stockItem.unitOfMeasurement) }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div class="d-flex flex-column">
			<div class="d-flex align-items-start   px-4 my-3" style="height: 48px;">
				<div class="font-size-18 font-family-bold font-color-dark">{{ReportTypeTitles.get(activeTabType) | translate}}</div>
			</div>
			<div class="flex-grow-1  ">
				<div class="statistics-income-wrapper income-font-size-14 pb-26px">
					<button
						class="product-report-chart-header-export-button statistics-export rounded position-absolute"
						(click)="onExport('daily')"></button>
					<app-date-chart [chartData]="daily" [chartId]="'dateChartContainer'">
					</app-date-chart>
					<div *ngIf="dailyLoading" class="loading"
						style="top: 0px; left: 0px; position: absolute; width: 100%; height: 100%;">
						<app-icon icon="loader-big"></app-icon>
					</div>
				</div>
				<app-tabs [activeTabType]="activeTabType" [reportTabs]="reportTabs"
					(reportTabClickHandler)="reportTabClick($event)"></app-tabs>
				<div class="pt-5 mt-2">
					<div class="font-size-18 font-family-bold font-color-dark px-4 pb-4">
						{{'STATISTICS.GENERAL.HOURS_AND_DAYS' | translate}}
					</div>
					<div class="d-flex">
						<div class="w-100 px-0 statistics-income-wrapper" style="max-width: 63.278%;">
							<button
								class="product-report-chart-header-export-button statistics-export rounded position-absolute"
								(click)="onExport('hourly')"></button>
							<app-column-chart [chartData]="hourly" [chartId]="'hourChartContainer'">
							</app-column-chart>
							<div *ngIf="hourlyLoading" class="loading"
								style="top: 0px; left: 0px; position: absolute; width: 100%; height: 100%;">
								<app-icon icon="loader-big"></app-icon>
							</div>
						</div>
						<div class="w-100 px-0 statistics-income-wrapper" style="max-width: 36.783%;">
							<button
								class="product-report-chart-header-export-button statistics-export rounded position-absolute"
								(click)="onExport('dayofweek')"></button>
							<app-column-chart [chartData]="dow" [chartId]="'weekChartContainer'">
							</app-column-chart>
							<div *ngIf="dowLoading" class="loading"
								style="top: 0px; left: 0px; position: absolute; width: 100%; height: 100%;">
								<app-icon icon="loader-big"></app-icon>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</ng-container>
</div>
