<form
  *ngIf="form"
  [formGroup]="form"
  (submit)="onSubmit()"
  class="offer-detail"
>   

<div class="container-fluid sticky-top bg-white mb-42px" style="height: 72px;">
  <div class="row align-items-center h-100 border-bottom border-secondary">
    <div class="col pl-0 h-100">
      <button type="button" class="btn bg-white px-2 h-100 rounded-0" style="width: 102px;"
        (click)="onClose()">
        <app-icon icon="close"></app-icon>
      </button>
    </div>
    <div class="col-auto font-size-20 font-family-bold text-dark">
      მომწოდებლის {{ title }}
    </div>
    <div class="col pr-4 h-100 d-flex align-items-center justify-content-end">
      <button class="btn btn-primary font-size-14 font-family-bold text-white py-0 px-23px h-42px"
        type="submit">
        შენახვა
      </button>
    </div>
  </div>
</div>


<div class="w-100" *ngIf="isSubmited && form?.invalid">
  <div class="mx-auto bg-danger-bg px-4 rounded text-center border d-flex align-items-center border-danger-border mt-3"
    style="max-width: 960px;height: 54px;">
    <div class="col-2 d-flex px-0">
      <app-icon icon="alert"></app-icon>
    </div>
    <div class="col text-center font-size-14 font-color-dark font-family-regular">
      შეავსე გამორჩენილი ველები
    </div>
    <div class="col-2 px-0"></div>
  </div>
</div>
   

  <div class="container-md d-flex pt-5">
    <div class="pl-0 col-12">
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >დასახელება*</label
        >
        <input class="form-control" type="text" formControlName="name" />
      </div>
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >საიდენტიფიკაციო კოდი*</label
        >
        <input
          id="addSupplierInn"
          type="text"
          class="form-control"
          formControlName="inn"
          mask="9{11}"
        />
      </div>

      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >ინდუსტრიები*</label
        >
        <app-dynamic-select
          id="addInventorySupplierIds"
          class="add-inventory-item__dynamic-select"
          [dataGetter]="getBusinessTypes"
          [itemGetterById]="getBusinessTypeById"
          [multiple]="true"
          [closeOnSelect]="false"
          formControlName="businessTypes"
        >
        </app-dynamic-select>
      </div>
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >საკონტაქტო პირი</label
        >
        <input
          id="addSupplierContactName"
          formControlName="contactName"
          type="text"
          class="form-control"
        />
      </div>
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >ტელეფონის ნომერი*</label
        >
        <input
          id="addSupplierPhoneNumber"
          formControlName="phoneNumber"
          type="text"
          class="form-control"
          [ngClass]="{
            'has-error-message': needErrorMessage('phoneNumber')
          }"
          mask="9{22}"
        />
        <div
          *ngIf="needErrorMessage('phoneNumber')"
          [matTooltip]="getErrorMessage('phoneNumber')"
          matTooltipClass="tooltip-validation"
          class="form-validation"
        ></div>
      </div>
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold">
          ელ. ფოსტა*
        </label>
        <input
          id="addSupplierEmail"
          formControlName="email"
          type="text"
          class="form-control"
          [ngClass]="{ 'has-error-message': needErrorMessage('email') }"                 
        />
        <div
          *ngIf="needErrorMessage('email')"
          [matTooltip]="getErrorMessage('email')"
          matTooltipClass="tooltip-validation"
          class="form-validation"
        ></div>
      </div>
      <div class="w-100 d-flex flex-column pb-32px">
        <label class="font-size-15 font-color-dark font-family-bold"
          >ანგარიშის ნომერი</label>
        <input
          id="addSupplierBankAccountNumber"
          formControlName="bankAccountNumber"
          type="text"
          class="form-control"
          [ngClass]="{
            'has-error-message': needErrorMessage('bankAccountNumber')
          }"                 
        />
        <div
          *ngIf="needErrorMessage('bankAccountNumber')"
          [matTooltip]="getErrorMessage('bankAccountNumber')"
          matTooltipClass="tooltip-validation"
          class="form-validation"
        ></div>
      </div>
      <div class="w-100 d-flex flex-column  position-relative pb-32px position-relative">
        <div class="font-size-15 font-color-dark font-family-bold pb-2">
          ლოგო
        </div>
        <div 
          class=" form-control d-flex py-0 pl-14 pr-0 overflow-hidden"
          [ngClass]="{
            'invalid': form.get('imageId').invalid && form.get('imageId').touched,
            'valid': form.get('imageId').valid
          }"
        >
          <div class="d-flex align-items-center col-9 py-2 pl-0">
            <div
              class="selected-custom-blue  d-flex py-1 px-1 text-truncate align-items-center font-size-14 font-color-dark font-family-regular">
              {{imageName}}
            </div>
          </div>
          <div class="col-3 overflow-hidden bg-sidebar-gray border-left border-table-border-color position-relative">
            <app-file-uploader 
              id="offerDetailIcon"
              class="h-100"
              [hideDefaultLabel]="true"
              [uploadFileParamName]="'image'"
              [uploadEndpoint]="'uploads/images?type=0'"
              (uploaded)="onPhotoUploaded($event, 0)"
              [emitFileName]="true"
              ></app-file-uploader>
            <div class="w-100 d-flex justify-content-center align-items-center h-100 bg-sidebar-gray position-absolute "
              style="top: 0px;left: 0px;pointer-events: none;">
              <app-icon icon="import"></app-icon>
              <span class="font-size-14 font-color-dark font-family-bold pl-1">ატვირთვა</span>
            </div>
          </div>
        </div>
        <div class="text-right font-size-12 font-color-dark font-family-regular pt-2">
          მინიმალური დასაშვები ზომები 128x128 (.jpg, .jpeg, .png)
        </div>

         
      </div>






      <div class="w-100 d-flex flex-column pb-32px">
        <div
          class="custom-checkbox custom-checkbox-selected-blue justify-content-start"
          style="margin-top: 12px;"
        >
          <input
            type="checkbox"
            id="custom-checkbox-VAT"
            class="custom-checkbox-control"
            formControlName="isVATRegistered"
          />
          <label for="custom-checkbox-VAT" class="custom-checkbox-label">
            <span class="ml-3">დღგ-ს გადამხდელი</span>
          </label>
        </div>
      </div>
    </div>
  </div>
</form>
